{% extends "base.html" %}
{% block content %}
<div class="row">
    <div class="col s12">
        <h1 class="center-align">Training Blog</h1>
    </div>
</div>
<!-- Modal form for new workout-post -->
<div id="new-workout" class="modal">
    <div class="modal-content">
        <h2 class="center-align">Post a Workout</h2>
    </div>
    <form method="POST" action="{{ url_for('training_blog') }}">
        <div class="row">
            <div class="input-field col s10 offset-s1">
                <i class="material-icons prefix">title</i>
                <input id="title" name="title" type="text" class="validate" required>
                <label for="title">Title</label>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s5 offset-s1">
                <i class="material-icons prefix">calendar_today</i>
                <input type="text" id="date" name="date" class="datepicker validate" required>
                <label for="date">Date</label>
            </div>
            <div class="input-field col s5">
                <i class="material-icons prefix">access_time</i>
                <input type="text" id="time" name="time" class="timepicker validate" required>
                <label for="time">Date</label>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s5 offset-s1">
                <i class="material-icons prefix">access_alarm</i>
                <select id="duration" class="validate" name="duration" required>
                    <option value="" disabled selected>Choose an option</option>
                    <option value="15">15 min</option>
                    <option value="30">30 min</option>
                    <option value="45">45 min</option>
                    <option value="60">60 min</option>
                    <option value="90">90 min</option>
                    <option value="90+">90+ min</option>
                </select>
                <label for="duration">Duration of Workout</label>
            </div>
            <div class="input-field col s5">
                <i class="material-icons prefix">location_on</i>
                <input id="location" name="location" type="text" class="validate" required>
                <label for="location">Location</label>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s10 offset-s1">
                <i class="material-icons prefix">subject</i>
                <textarea id="description" name="description" class="materialize-textarea" required></textarea>
                <label for="description">Description</label>
            </div>
        </div>
        <div class="row">
            <div class="col s12 center-align">
                <button class="btn waves-effect waves-light" type="submit" name="action" value="workout">Submit
                    <i class="material-icons right">send</i>
                </button>
            </div>
        </div>
    </form>
    <div class="modal-footer">
        <a href="#!" class="modal-close waves-effect waves-green btn-flat"><i
                class="text-icon large material-icons">cancel</i>Cancel</a>
    </div>
</div>
<!-- Modal for edit workout -->
<div id="edit-workout" class="modal">
    <div class="modal-content">
        <h2 class="center-align">Post a Workout</h2>
    </div>
    <form method="POST" action="{{ url_for('training_blog') }}">
        <div class="row">
            <div class="input-field col s10 offset-s1">
                <i class="material-icons prefix">title</i>
                <input id="title" name="title" type="text" class="validate" required>
                <label for="title">Title</label>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s5 offset-s1">
                <i class="material-icons prefix">calendar_today</i>
                <input type="text" id="date" name="date" class="datepicker validate" required>
                <label for="date">Date</label>
            </div>
            <div class="input-field col s5">
                <i class="material-icons prefix">access_time</i>
                <input type="text" id="time" name="time" class="timepicker validate" required>
                <label for="time">Date</label>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s5 offset-s1">
                <i class="material-icons prefix">access_alarm</i>
                <select id="duration" class="validate" name="duration" required>
                    <option value="" disabled selected>Choose an option</option>
                    <option value="15">15 min</option>
                    <option value="30">30 min</option>
                    <option value="45">45 min</option>
                    <option value="60">60 min</option>
                    <option value="90">90 min</option>
                    <option value="90+">90+ min</option>
                </select>
                <label for="duration">Duration of Workout</label>
            </div>
            <div class="input-field col s5">
                <i class="material-icons prefix">location_on</i>
                <input id="location" name="location" type="text" class="validate" required>
                <label for="location">Location</label>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s10 offset-s1">
                <i class="material-icons prefix">subject</i>
                <textarea id="description" name="description" class="materialize-textarea" required></textarea>
                <label for="description">Description</label>
            </div>
        </div>
        <div class="row">
            <div class="col s12 center-align">
                <button class="btn waves-effect waves-light" type="submit" name="action" value="workout">Save
                    <i class="material-icons right">send</i>
                </button>
            </div>
        </div>
    </form>
    <div class="modal-footer">
        <a href="#!" class="modal-close waves-effect waves-green btn-flat"><i
                class="text-icon large material-icons">cancel</i>Cancel</a>
    </div>
</div>
<!-- Modal form for new blog-post -->
<div id="new-blog" class="modal">
    <div class="modal-content">
        <h2 class="center-align">New Blog-Post</h2>
    </div>
    <form method="POST" action="{{ url_for('training_blog') }}">
        <div class="row">
            <div class="input-field col s10 offset-s1">
                <i class="material-icons prefix">title</i>
                <input id="title" name="title" type="text" class="validate" required>
                <label for="title">Title</label>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s10 s10 offset-s1">
                <i class="material-icons prefix">subject</i>
                <textarea id="main-content" name="main-content" class="materialize-textarea" required></textarea>
                <label for="main-content">Text content</label>
            </div>
        </div>
        <div class="row">
            <div class="col s12 center-align">
                <button class="btn waves-effect waves-light" type="submit" name="action" value="blog">Submit
                    <i class="material-icons right">send</i>
                </button>
            </div>
        </div>
    </form>
    <div class="modal-footer">
        <a href="#!" class="modal-close waves-effect waves-green btn-flat"><i
                class="text-icon large material-icons">cancel</i>Cancel</a>
    </div>
</div>
<!-- Tabs -->
<div class="row">
    <div class="col s12">
        <ul class="tabs">
            <li class="tab col s6"><a class="active" href="#workouts">Workouts</a></li>
            <li class="tab col s6"><a href="#blog-posts">Blog Posts</a></li>
        </ul>
    </div>
    <!-- Workouts tab -->
    <div id="workouts" class="col s12">
        <button id="add-post" data-target="new-workout" class="btn-large modal-trigger"><i
                class="large material-icons left">add</i>New Post</button>
        {% for post in posts %}
        {% if post.category == "workout" %}
        <div class="row">
            <div class="col s12">
                <div class="card-panel">
                    <h3>{{ post.title }}</h3>
                    <div class="row workout-container">
                        <div class="col s6 m3 workout-specs"><i
                                class="text-icon small material-icons">location_on</i>{{ post.location }}
                        </div>
                        <div class="col s6 m3 workout-specs"><i
                                class="text-icon small material-icons">calendar_today</i>{{ post.date }}
                        </div>
                        <div class="col s6 m3 workout-specs"><i
                                class="text-icon small material-icons">access_time</i>{{ post.time }}
                        </div>
                        <div class="col s6 m3 workout-specs"><i
                                class="text-icon small material-icons">access_alarm</i>{{ post.duration }} mins</div>
                    </div>
                    <p>{{ post.description }}</p>
                    <p class="grey-text"><em>Posted by: {{ post.author }}</em></p>
                    {% if session.user|lower == post.author %}
                    <div>
                        <a href="{{ url_for('edit_workout', post_id=post._id) }}">EDIT</a> | <a class="modal-trigger"
                            href="#delete-workout">DELETE</a>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
        <div id="delete-workout" class="modal delete-modal">
            <div class="modal-content">
                <h4 class="center-align">Delete post</h4>
                <p class="center-align">Are you sure you want to delete this post?</p>
                <div class="row">
                    <div class="col s6 center-align">
                        <a class="btn waves-light waves-effect yellow"
                            href="{{ url_for('delete_workout', post_id=post._id) }}">DELETE</a>
                    </div>
                    <div class="col s6 center-align">
                        <a href="#!" class="modal-close btn waves-light waves-effect btn">CANCEL</a>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
        {% endfor %}
    </div>
    <!-- Blog-post tab -->
    <div id="blog-posts" class="col s12">
        <button id="add-post" data-target="new-blog" class="btn-large modal-trigger"><i
                class="large material-icons left">add</i>New Post</button>
        {% for post in posts %}
        {% if post.category == "blog-post" %}
        <!-- Blog-post -->
        <div class="row">
            <div class="col s12">
                <div class="card-panel">
                    <h3>{{ post.title }}</h3>
                    <p>{{ post.description }}</p>
                    <p class="grey-text"><em>Posted by: {{ post.author }}</em></p>
                    {% if session.user|lower == post.author %}
                    <div>
                        <a href="">EDIT</a> | <a href="">DELETE</a>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endif %}
        {% endfor %}
    </div>
    {% endblock %}
</div>